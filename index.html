<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-599PLQYSWE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-599PLQYSWE');

      // è‡ªå®šç¾©è¿½è¹¤ï¼šç´€éŒ„è—¥å“é»æ“Š
      function trackDrugClick(drugName) {
        gtag('event', 'view_drug_advice', {
          'drug_name': drugName
        });
      }

      // è‡ªå®šç¾©è¿½è¹¤ï¼šç´€éŒ„æœå°‹é—œéµå­—
      function trackSearch(keyword) {
        if (keyword.length >= 2) {
          gtag('event', 'search_drug', {
            'search_term': keyword
          });
        }
      }
    </script>
    
    <meta charset="UTF-8">
    <title>è¡“å‰åœè—¥æé†’å°å¹«æ‰‹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            background: linear-gradient(to bottom right, #f0f4f8, #ffffff);
            padding: 15px;
        }
        #chatbox {
            background: #ffffff;
            padding: 20px;
            border-radius: 15px;
            max-width: 90%;
            margin: auto;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
        }
        .msg {
            margin: 10px 0;
            line-height: 1.6;
        }
        .bot {
            color: #34495e;
        }
        .user {
            text-align: right;
            color: #007bff;
            font-weight: 500;
        }
        .btn {
            padding: 10px 15px;
            margin: 5px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: inline-block;
        }
        .btn:hover {
            background: #0056b3;
            transform: scale(1.05);
        }
        .footer {
            margin-top: 20px;
            font-size: 0.85em;
            color: #555;
            text-align: center;
            line-height: 1.6;
        }
        .drug-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 10px 0;
            text-align: center;
        }
        .drug-item img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: #f9f9f9;
            cursor: zoom-in;
            transition: transform 0.3s ease-in-out;
        }
        .drug-item img:hover {
            transform: scale(3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            width: 95%;
            max-width: 90%;
            max-height: 80%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .modal-content#zoomed-image {
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        @keyframes zoom {
            from {transform: translate(-50%, -50%) scale(0.1)}
            to {transform: translate(-50%, -50%) scale(1)}
        }
        .close-button {
            position: absolute;
            top: 15px;
            right: 25px;
            color: #f1f1f1;
            font-size: 30px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
        input[type="text"] {
            width: 95%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-size: 0.9rem;
            background: #fefefe;
        }
        #searchButton {
            padding: 10px 15px;
            margin: 5px;
            color: #000;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: inline-block;
        }
        #searchButton:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <h1 style="text-align:center;">è¡“å‰åœè—¥æé†’å°å¹«æ‰‹<br><span style="color:red; font-weight:bold; font-size: 0.5em;">æ­¤é¡è—¥ç‰©çš„åœç”¨ï¼Œè«‹å‹™å¿…èˆ‡æ‚¨çš„æ‰‹è¡“é†«å¸«è¨è«–å¾Œå†åŸ·è¡Œã€‚</span></h1>
    <div id="chatbox">
        <input type="text" id="searchInput" placeholder="ğŸ” æœå°‹è—¥å“åç¨±ï¼ˆå¦‚ï¼šæ³¢ç«‹ç¶­ã€plavixï¼‰" oninput="searchDrugs()">
        <button id="searchButton" onclick="searchDrugs()">æœå°‹</button> 
        <button class="btn" style="background:#888" onclick="showAllDrugs()">ğŸ—‚ï¸ æˆ‘ä¸ç¢ºå®šè—¥åï¼Œç€è¦½å…¨éƒ¨è—¥å“</button>
        <button class="btn" onclick="showGroup('anticoagulants')" style="background:#007bff">ğŸ’Š æŠ—å‡è¡€åŠ‘ç¾¤</button>
        <button class="btn" onclick="showGroup('sglt2')" style="background:#ff6fa5; color:#fff;">ğŸ’Š ç³–å°¿ç—…æˆ–å¿ƒè‡Ÿç§‘ç”¨è—¥</button>
    </div>
    <div class="footer">
        æœ¬å·¥å…·ç”±è‡ºå¤§é†«é™¢æ–°ç«¹åˆ†é™¢éº»é†‰éƒ¨è£½ä½œï¼Œç”¨æ–¼ç—…æ‚£è¡›æ•™ç”¨é€”ã€‚
    </div>
    <div id="imageModal" class="modal" onclick="this.style.display='none'">
        <span class="close-button">&times;</span>
        <img class="modal-content" id="zoomed-image">
    </div>

<script>
const drugs = {
    anticoagulants: [
        { name: "licodin", display: "Licodinï¼ˆåˆ©è¡€é”ï¼‰", img: "https://imgur.com/NsEMXDR.png" },
        { name: "ticlopidine", display: "Ticlopidineï¼ˆåˆ©è¡€é”ï¼‰", img: "https://imgur.com/g6GJBS9.png" },
        { name: "efient", display: "Efientï¼ˆæŠ‘å‡å®‰ï¼‰", img: "https://imgur.com/WW1RKPq.png" },
        { name: "prasugrel", display: "Prasugrelï¼ˆæŠ‘å‡å®‰ï¼‰", img: "https://imgur.com/0BFFk1x.png" },
        { name: "plavix", display: "Plavixï¼ˆä¿æ “é€šï¼‰", img: "https://imgur.com/d6pVof3.png" },
        { name: "clopidogrel", display: "Clopidogrelï¼ˆä¿æ “é€šï¼‰", img: "https://imgur.com/OLM7PR7.png" },
        { name: "brilinta", display: "Brilintaï¼ˆå€æ—é”ï¼‰", img: "https://imgur.com/Stxt06t.png" },
        { name: "ticagrelor", display: "Ticagrelorï¼ˆæ³°å˜‰ï¼‰", img: "https://imgur.com/UxC5sLO.png" },
        { name: "cofrarin", display: "Cofrarinï¼ˆå¯åŒ–å‡ï¼‰", img: "https://imgur.com/i8lY1Eh.png" },
        { name: "warfarin", display: "Warfarinï¼ˆæ­æœå¯§ï¼‰", img: "https://imgur.com/WakHRoW.png" },
        { name: "aspirin", display: "Aspirinï¼ˆé˜¿æ–¯åŒ¹éˆï¼‰", img: "https://imgur.com/ZjzTIWF.png" },
        { name: "bokey", display: "Bokeyï¼ˆä¼¯åŸºï¼‰", img: "https://imgur.com/slkEisb.png" },
        { name: "pletaal", display: "Pletaalï¼ˆæ™®é”ï¼‰", img: "https://imgur.com/OPvZKNW.png" },
        { name: "cilostazol", display: "Cilostazolï¼ˆå–œä¾†å¦¥ï¼‰", img: "https://imgur.com/OPvZKNW.png" },
        { name: "sandel", display: "Sandelï¼ˆå¿ƒæ»´èˆ’ï¼‰", img: "https://imgur.com/CZondqv.png" },
        { name: "dipyridamole", display: "Dipyridamoleï¼ˆæ‰€é›·å¸ï¼‰", img: "https://imgur.com/PKMbp8F.png" },
        { name: "eliquis", display: "Eliquisï¼ˆè‰¾å¿…å…‹å‡ï¼‰", img: "https://imgur.com/5ZN6msk.png" },
        { name: "apixaban", display: "Apixabanï¼ˆè‰¾å¿…å…‹å‡ï¼‰", img: "https://imgur.com/5ZN6msk.png" },
        { name: "lixiana", display: "Lixianaï¼ˆé‡Œå…ˆå®‰ï¼‰", img: "https://imgur.com/GhW0XSG.png" },
        { name: "endoxaban", display: "Endoxabanï¼ˆæ©å¤šæ²™ç­ï¼‰", img: "https://imgur.com/GhW0XSG.png" },
        { name: "xarelto", display: "Xareltoï¼ˆæ‹œç‘å¦¥ï¼‰", img: "https://imgur.com/s54F6i9.png" },
        { name: "rivaroxaban", display: "Rivaroxabanï¼ˆåˆ©ä¼æ²™ç­ï¼‰", img: "https://imgur.com/s54F6i9.png" },
        { name: "clexane", display: "Clexaneï¼ˆå¯ç«‹å–„ï¼‰", img: "https://imgur.com/qZGoe5E.png" },
        { name: "enoxaparin", display: "Enoxaparinï¼ˆä¾è«¾è‚ç´ ï¼‰", img: "https://imgur.com/qZGoe5E.png" },
        { name: "gincare", display: "Gincareï¼ˆéŠ€æå¯§ï¼‰", img: "https://imgur.com/nLSYFme.png" },
    ],
    sglt2: [
        { name: "invokana", display: "Canagliflozinï¼ˆInvokanaÂ®ï¼Œå¯æ‹¿ç³–ï¼‰", img: "https://imgur.com/rnyqtHh.png" },
        { name: "invokamet", display: "Canagliflozin/Metforminï¼ˆInvokametÂ®ï¼Œå¯æ‹¿ç³–è¤‡æ–¹ï¼‰", img: "https://imgur.com/D1UCEPf.png" },
        { name: "invokamet xr", display: "Canagliflozin/Metformin XRï¼ˆInvokametÂ® XRï¼Œå¯æ‹¿ç³–ç·©é‡‹è¤‡æ–¹ï¼‰", img: "https://imgur.com/M7THdw3.png" },
        { name: "farxiga", display: "Dapagliflozinï¼ˆForxigaÂ®ï¼Œç¦é©ä½³ï¼‰", img: "https://imgur.com/cfdwxTi.png" },
        { name: "xigduo", display: "Dapagliflozin/Metformin XRï¼ˆXigduoÂ®ï¼Œå–œå¦¥ç³–ï¼‰", img: "https://imgur.com/NJ6zMSD.png" },
        { name: "qtern", display: "Dapagliflozin/Saxagliptinï¼ˆQternÂ®ï¼Œæ§ç³–ç©©ï¼‰", img: "https://imgur.com/40wnbhg.png" },
        { name: "qternmet xr", display: "Dapagliflozin/Saxagliptin/Metformin XRï¼ˆQternmetÂ® XRï¼Œæ·åˆ©å¦¥è¤‡æ–¹ï¼‰", img: "https://imgur.com/Gv4QP6T.png" },
        { name: "jardiance", display: "Empagliflozinï¼ˆJardianceÂ®ï¼Œæ©æ’ç³–ï¼‰", img: "https://imgur.com/8x87vYV.png" },
        { name: "synjardy", display: "Empagliflozin/Metforminï¼ˆSynjardyÂ®ï¼Œæ²›å¦¥ç³–è¤‡æ–¹ï¼‰", img: "https://imgur.com/RHvBTgK.png" },
        { name: "synjardy xr", display: "Empagliflozin/Metformin XRï¼ˆSynjardyÂ® XRï¼Œæ²›å¦¥ç³–ç·©é‡‹è¤‡æ–¹ï¼‰", img: "https://imgur.com/KvArm7u.png" },
        { name: "glyxambi", display: "Empagliflozin/Linagliptinï¼ˆGlyxambiÂ®ï¼Œç³–é †å¹³ï¼‰", img: "https://imgur.com/Cg1fbEz.png" },
        { name: "trijardy xr", display: "Empagliflozin/Linagliptin/Metformin XRï¼ˆTrijardyÂ® XRï¼Œä½³å¦¥ç³–ä¸‰åˆä¸€ï¼‰", img: "https://imgur.com/xT0qn1J.png" },
        { name: "steglatro", display: "Ertugliflozinï¼ˆSteglatroâ„¢ï¼Œé‡‹ç³–å¥ï¼‰", img: "https://imgur.com/YeTlrAL.png" },
        { name: "segluromet", display: "Ertugliflozin/Metforminï¼ˆSeglurometâ„¢ï¼Œå¦¥ç³–ä½³è¤‡æ–¹ï¼‰", img: "https://imgur.com/s8mlurp.png" },
        { name: "steglujan", display: "Ertugliflozin/Sitagliptinï¼ˆSteglujanâ„¢ï¼Œæ†å¦¥ç³–ä½³ï¼‰", img: "https://imgur.com/PW07xqQ.png" }
    ],
    glp1: [
        { name: "dulaglutide", display: "Dulaglutideï¼ˆTrulicityÂ®ï¼Œæ˜“è£œç³–ï¼‰", img: "images/dulaglutide.png" },
        { name: "liraglutide", display: "Liraglutideï¼ˆSaxendaÂ®ï¼Œå–„çº–é”ï¼‰", img: "images/liraglutide.png" },
        { name: "lixisenatide", display: "Lixisenatideï¼ˆLyxumiaÂ®ï¼Œåˆ©èˆ’å¬”ï¼‰", img: "images/lixisenatide.png" },
        { name: "semaglutide", display: "Semaglutideï¼ˆOzempicÂ®ï¼Œèƒ°å³¶èƒ½ / RybelsusÂ®ï¼Œç‘å€é©ï¼‰", img: "images/semaglutide.png" },
        { name: "tirzepatide", display: "Tirzepatideï¼ˆMounjaroÂ®ï¼ŒçŒ›å¥æ¨‚ï¼‰", img: "images/tirzepatide.png" }
    ] 
};

function showGroup(group) {
    const box = document.getElementById('chatbox');
    box.innerHTML = `
        <input type="text" id="searchInput" placeholder="ğŸ” æœå°‹è—¥å“åç¨±ï¼ˆå¦‚ï¼šæ³¢ç«‹ç¶­ã€plavixï¼‰" oninput="searchDrugs()">
        <button id="searchButton" onclick="searchDrugs()">æœå°‹</button>
        <button class="btn" style="background:#888" onclick="showAllDrugs()">ğŸ—‚ï¸ æˆ‘ä¸ç¢ºå®šè—¥åï¼Œç€è¦½å…¨éƒ¨è—¥å“</button>
        <button class="btn" onclick="showGroup('anticoagulants')" style="background:#007bff">ğŸ’Š æŠ—å‡è¡€åŠ‘ç¾¤</button>
        <button class="btn" onclick="showGroup('sglt2')" style="background:#ff6fa5; color:#fff;">ğŸ’Š ç³–å°¿ç—…æˆ–å¿ƒè‡Ÿç§‘ç”¨è—¥</button>
        <div class='msg bot'>è«‹é¸æ“‡è—¥å“ï¼š</div>
    `;
    const sortedDrugs = drugs[group].slice().sort((a, b) => a.name.localeCompare(b.name));
    sortedDrugs.forEach(drug => {
        const groupColor = group === 'sglt2' ? '#ff6fa5' : '#007bff';
        box.innerHTML += `
            <div class='drug-item'>
                <img src="${drug.img || 'https://via.placeholder.com/150'}" onclick="showAdvice('${drug.display}', '${drug.img}')" style="margin: 0 auto;">
                <button class='btn' style="background:${groupColor}; color:#fff;" onclick="showAdvice('${drug.display}', '${drug.img}')">${drug.display}</button>
            </div>
        `;
    });
}

function searchDrugs() {
    const keyword = document.getElementById('searchInput').value.toLowerCase();
    
    // --- GA4 æœå°‹è¿½è¹¤ ---
    trackSearch(keyword);

    const existingResults = document.getElementById('searchResults');
    if (!existingResults) {
        const resultBox = document.createElement('div');
        resultBox.id = 'searchResults';
        document.getElementById('chatbox').appendChild(resultBox);
    }
    const resultBox = document.getElementById('searchResults');
    resultBox.innerHTML = '';
    if (!keyword) return;

    let found = false;
    Object.keys(drugs).forEach(group => {
        const matched = drugs[group].filter(drug => (
            drug.display.toLowerCase().includes(keyword) ||
            drug.name.toLowerCase().includes(keyword)
        ));
        matched.sort((a, b) => a.name.localeCompare(b.name));
        matched.forEach(drug => {
            found = true;
            const groupColor = group === 'sglt2' ? '#ff6fa5' : '#007bff';
            resultBox.innerHTML += `
                <div class='drug-item'>
                    <img src="${drug.img || 'https://via.placeholder.com/150'}" onclick="showAdvice('${drug.display}', '${drug.img}')" style="margin: 0 auto;">
                    <button class='btn' style="background:${groupColor}; color:#fff;" onclick="showAdvice('${drug.display}', '${drug.img}')">${drug.display}</button>
                </div>
            `;
        });
    });
    if (!found) {
        resultBox.innerHTML += `<div class='msg bot'>æ²’æœ‰æ‰¾åˆ°ç›¸é—œè—¥å“ã€‚</div>`;
    }
}

function showAdvice(drug, img) {
    // --- GA4 é»æ“Šè¿½è¹¤ ---
    trackDrugClick(drug);

    const box = document.getElementById('chatbox');
    box.innerHTML = `<div class='msg user'>${drug}</div>`;
    let message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚è«‹å‹™å¿…èˆ‡æ‚¨çš„æ‰‹è¡“é†«å¸«æˆ–æ–¼éº»é†‰è«®è©¢æ™‚ç¢ºèªå…·é«”åœè—¥æ–¹å¼ã€‚`;
    
    const fourDayDrugs = ["Steglatro", "Segluromet", "Steglujan", "Forxiga", "Canaglu", "Jardiance", "Glyxambi", "Qtern", "Xigduo"];
    
    if (fourDayDrugs.some(d => drug.includes(d))) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥è‡³å°‘ 4 å¤©ï¼ˆ96 å°æ™‚ï¼‰</span>ã€‚`;
    } else if (drug.includes("Invokana") || drug.includes("Invokamet") || drug.includes("Invokamet XR") || drug.includes("Xigduo XR") || drug.includes("Qternmet XR") || drug.includes("Synjardy") || drug.includes("Synjardy XR") || drug.includes("Trijardy XR")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥è‡³å°‘ 3 å¤©ï¼ˆ72 å°æ™‚ï¼‰</span>ã€‚`;
    } else if (drug.includes("Lidodin") || drug.includes("Ticlopidine")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥è‡³å°‘ 10 å¤©</span>ã€‚`;
    } else if (drug.includes("Efient") || drug.includes("Prasugrel") || drug.includes("Plavix") || drug.includes("Clopidogrel") || drug.includes("Brilinta") || drug.includes("Ticagrelor")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 5ï½7 å¤©</span>ã€‚`;
    } else if (drug.includes("Cofrarin") || drug.includes("Warfarin")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 5ï½7 å¤©</span>ã€‚`;
    } else if (drug.includes("Aspirin") || drug.includes("Bokey")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 5ï½7 å¤©</span> æˆ–ä¾é†«å›‘èª¿æ•´ã€‚`;
    } else if (drug.includes("Pletaal") || drug.includes("Cilostazol") || drug.includes("Sandel") || drug.includes("Dipyridamole")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 3 å¤©</span>ã€‚`;
    } else if (drug.includes("Clexane") || drug.includes("Enoxaparin")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 24 å°æ™‚</span>ã€‚`;
    } else if (drug.includes("Heparin")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 12 å°æ™‚</span>ã€‚`;
    } else if (drug.includes("Gincare") || drug.includes("éŠ€æ")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 36 å°æ™‚</span>ã€‚`;
    }
    
    box.innerHTML += `<div class='msg bot'>${message} <br> <img src="${img}" style="max-width: 200px; max-height: 200px; margin: 0 auto;" onclick="zoomImage('${img}')"></div>`;
    box.innerHTML += `<button class='btn' style="background:#28a745; color:#fff;" onclick='restart()' style="margin: 0 auto;">ğŸ” é‡æ–°æŸ¥è©¢</button>`;
    window.scrollTo(0, document.body.scrollHeight);
}

function restart() {
    location.reload();
}

function showAllDrugs() {
    const box = document.getElementById('chatbox');
    box.innerHTML = `<div class='msg bot'>è«‹é»é¸æ‚¨æœç”¨çš„è—¥å“ï¼š</div>`;
    ['anticoagulants', 'sglt2'].forEach(group => {
        const groupColor = group === 'sglt2' ? '#ff6fa5' : '#007bff';
        const sortedDrugs = drugs[group].slice().sort((a, b) => a.name.localeCompare(b.name));
        sortedDrugs.forEach(drug => {
            box.innerHTML += `
                <div class='drug-item'>
                    <img src="${drug.img || 'https://via.placeholder.com/150'}" onclick="showAdvice('${drug.display}', '${drug.img}')" style="margin: 0 auto;">
                    <button class='btn' style="background:${groupColor}; color:#fff;" onclick="showAdvice('${drug.display}', '${drug.img}')">${drug.display}</button>
                </div>
            `;
        });
    });
}

function zoomImage(img) {
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("zoomed-image");
    modal.style.display = "block";
    modalImg.src = img;
    modalImg.alt = "è—¥å“åœ–ç‰‡";
}
</script>
</body>
</html>
