<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-599PLQYSWE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-599PLQYSWE');

      function trackDrugClick(drugName) {
        gtag('event', 'view_drug_advice', { 'drug_name': drugName });
      }
      function trackSearch(keyword) {
        if (keyword.length >= 2) {
          gtag('event', 'search_drug', { 'search_term': keyword });
        }
      }
    </script>

    <meta charset="UTF-8">
    <title>è¡“å‰åœè—¥æé†’å°å¹«æ‰‹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
            background: linear-gradient(to bottom right, #f0f4f8, #ffffff);
            padding: 15px;
            margin: 0;
        }
        #chatbox {
            background: #ffffff;
            padding: 20px;
            border-radius: 15px;
            max-width: 600px;
            margin: auto;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            min-height: 450px;
        }
        h1 { font-size: 1.4rem; text-align: center; color: #2c3e50; }
        .msg { margin: 10px 0; line-height: 1.6; }
        .bot { color: #34495e; }
        .user { text-align: right; color: #007bff; font-weight: 500; }
        
        .btn {
            padding: 10px 15px;
            margin: 5px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: inline-block;
        }
        .btn:hover { background: #0056b3; transform: scale(1.05); }
        
        .drug-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 15px 0;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 15px;
        }
        .drug-item img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #eee;
            background: #f9f9f9;
            cursor: pointer;
        }

        /* æœå°‹æ¡†èˆ‡çµæœæ¨£å¼ */
        input[type="text"] {
            width: 100%;
            box-sizing: border-box;
            padding: 12px;
            margin: 10px 0;
            border-radius: 10px;
            border: 2px solid #007bff;
            font-size: 1rem;
            outline: none;
        }
        #resultArea {
            margin-top: 15px;
        }

        /* å…¨è¢å¹•ç‡ˆç®± Modal */
        .modal {
            display: none; 
            position: fixed;
            z-index: 10000;
            left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.9);
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .modal-content {
            max-width: 90%;
            max-height: 80%;
            border: 2px solid white;
            border-radius: 10px;
        }
        .modal::after {
            content: "é»æ“Šä»»æ„è™•é—œé–‰";
            color: #ccc;
            margin-top: 15px;
            font-size: 0.8rem;
        }

        .footer { margin-top: 20px; font-size: 0.85em; color: #555; text-align: center; }
    </style>
</head>
<body>

    <h1>è¡“å‰åœè—¥æé†’å°å¹«æ‰‹<br>
        <span style="color:red; font-weight:bold; font-size: 0.55em;">æ­¤é¡è—¥ç‰©çš„åœç”¨ï¼Œè«‹å‹™å¿…èˆ‡æ‚¨çš„æ‰‹è¡“é†«å¸«è¨è«–å¾Œå†åŸ·è¡Œã€‚</span>
    </h1>

    <div id="chatbox">
        <input type="text" id="searchInput" placeholder="ğŸ” æ‰“å­—å³æœå°‹ï¼ˆå¦‚ï¼šä¼¯åŸºã€a...ï¼‰" oninput="searchDrugs()">
        
        <div id="buttonGroup">
            <button class="btn" style="background:#888" onclick="showAllDrugs()">ğŸ—‚ï¸ ç€è¦½å…¨éƒ¨</button>
            <button class="btn" onclick="showGroup('anticoagulants')" style="background:#007bff">ğŸ’Š æŠ—å‡è¡€åŠ‘ç¾¤</button>
            <button class="btn" onclick="showGroup('sglt2')" style="background:#ff6fa5;">ğŸ’Š ç³–å°¿ç—…/å¿ƒè‡Ÿç”¨è—¥</button>
            <button class="btn" onclick="showGroup('glp1')" style="background:#ff9a6f;">ğŸ’Š æ¸›é‡é¡ç”¨è—¥</button>
        </div>

        <div id="resultArea"></div>
    </div>

    <div class="footer">æœ¬å·¥å…·ç”±è‡ºå¤§é†«é™¢æ–°ç«¹åˆ†é™¢éº»é†‰éƒ¨è£½ä½œï¼Œç”¨æ–¼ç—…æ‚£è¡›æ•™ç”¨é€”ã€‚</div>

    <div id="imageModal" class="modal" onclick="this.style.display='none'">
        <img class="modal-content" id="zoomed-image">
    </div>

<script>
const drugs = {
    anticoagulants: [
        { name: "licodin", display: "Licodinï¼ˆåˆ©è¡€é”ï¼‰", img: "https://imgur.com/NsEMXDR.png" },
        { name: "ticlopidine", display: "Ticlopidineï¼ˆåˆ©è¡€é”ï¼‰", img: "https://imgur.com/g6GJBS9.png" },
        { name: "efient", display: "Efientï¼ˆæŠ‘å‡å®‰ï¼‰", img: "https://imgur.com/WW1RKPq.png" },
        { name: "prasugrel", display: "Prasugrelï¼ˆæŠ‘å‡å®‰ï¼‰", img: "https://imgur.com/0BFFk1x.png" },
        { name: "plavix", display: "Plavixï¼ˆä¿æ “é€šï¼‰", img: "https://imgur.com/d6pVof3.png" },
        { name: "clopidogrel", display: "Clopidogrelï¼ˆä¿æ “é€šï¼‰", img: "https://imgur.com/OLM7PR7.png" },
        { name: "brilinta", display: "Brilintaï¼ˆå€æ—é”ï¼‰", img: "https://imgur.com/Stxt06t.png" },
        { name: "ticagrelor", display: "Ticagrelorï¼ˆæ³°å˜‰ï¼‰", img: "https://imgur.com/UxC5sLO.png" },
        { name: "cofrarin", display: "Cofrarinï¼ˆå¯åŒ–å‡ï¼‰", img: "https://imgur.com/i8lY1Eh.png" },
        { name: "warfarin", display: "Warfarinï¼ˆæ­æœå¯§ï¼‰", img: "https://imgur.com/WakHRoW.png" },
        { name: "aspirin", display: "Aspirinï¼ˆé˜¿æ–¯åŒ¹éˆï¼‰", img: "https://imgur.com/ZjzTIWF.png" },
        { name: "bokey", display: "Bokeyï¼ˆä¼¯åŸºï¼‰", img: "https://imgur.com/slkEisb.png" },
        { name: "pletaal", display: "Pletaalï¼ˆæ™®é”ï¼‰", img: "https://imgur.com/OPvZKNW.png" },
        { name: "cilostazol", display: "Cilostazolï¼ˆå–œä¾†å¦¥ï¼‰", img: "https://imgur.com/OPvZKNW.png" },
        { name: "sandel", display: "Sandelï¼ˆå¿ƒæ»´èˆ’ï¼‰", img: "https://imgur.com/CZondqv.png" },
        { name: "dipyridamole", display: "Dipyridamoleï¼ˆæ‰€é›·å¸ï¼‰", img: "https://imgur.com/PKMbp8F.png" },
        { name: "eliquis", display: "Eliquisï¼ˆè‰¾å¿…å…‹å‡ï¼‰", img: "https://imgur.com/5ZN6msk.png" },
        { name: "apixaban", display: "Apixabanï¼ˆè‰¾å¿…å…‹å‡ï¼‰", img: "https://imgur.com/5ZN6msk.png" },
        { name: "lixiana", display: "Lixianaï¼ˆé‡Œå…ˆå®‰ï¼‰", img: "https://imgur.com/GhW0XSG.png" },
        { name: "endoxaban", display: "Endoxabanï¼ˆæ©å¤šæ²™ç­ï¼‰", img: "https://imgur.com/GhW0XSG.png" },
        { name: "xarelto", display: "Xareltoï¼ˆæ‹œç‘å¦¥ï¼‰", img: "https://imgur.com/s54F6i9.png" },
        { name: "rivaroxaban", display: "Rivaroxabanï¼ˆåˆ©ä¼æ²™ç­ï¼‰", img: "https://imgur.com/s54F6i9.png" },
        { name: "clexane", display: "Clexaneï¼ˆå¯ç«‹å–„ï¼‰", img: "https://imgur.com/qZGoe5E.png" },
        { name: "enoxaparin", display: "Enoxaparinï¼ˆä¾è«¾è‚ç´ ï¼‰", img: "https://imgur.com/qZGoe5E.png" },
        { name: "gincare", display: "Gincareï¼ˆéŠ€æå¯§ï¼‰", img: "https://imgur.com/nLSYFme.png" }
    ],
    sglt2: [
        { name: "invokana", display: "Canagliflozin (InvokanaÂ®)", img: "https://imgur.com/rnyqtHh.png" },
        { name: "invokamet", display: "Canagliflozin/Metformin (InvokametÂ®)", img: "https://imgur.com/D1UCEPf.png" },
        { name: "invokamet xr", display: "Canagliflozin/Metformin XR", img: "https://imgur.com/M7THdw3.png" },
        { name: "farxiga", display: "Dapagliflozin (ForxigaÂ®ï¼Œç¦é©ä½³)", img: "https://imgur.com/cfdwxTi.png" },
        { name: "xigduo", display: "Dapagliflozin/Metformin XR (XigduoÂ®ï¼Œé‡‹å¤šç³–)", img: "https://imgur.com/NJ6zMSD.png" },
        { name: "qtern", display: "Dapagliflozin/Saxagliptin (QternÂ®ï¼Œæ§ç³–ç©©)", img: "https://imgur.com/40wnbhg.png" },
        { name: "qternmet xr", display: "Dapagliflozin/Saxagliptin/Metformin XR", img: "https://imgur.com/Gv4QP6T.png" },
        { name: "jardiance", display: "Empagliflozin (JardianceÂ®ï¼Œæ©æ’ç³–)", img: "https://imgur.com/8x87vYV.png" },
        { name: "synjardy", display: "Empagliflozin/Metformin (SynjardyÂ®)", img: "https://imgur.com/RHvBTgK.png" },
        { name: "synjardy xr", display: "Empagliflozin/Metformin XR", img: "https://imgur.com/KvArm7u.png" },
        { name: "glyxambi", display: "Empagliflozin/Linagliptin (GlyxambiÂ®ï¼Œç³–é †å¹³)", img: "https://imgur.com/Cg1fbEz.png" },
        { name: "trijardy xr", display: "Empagliflozin/Linagliptin/Metformin XR", img: "https://imgur.com/xT0qn1J.png" },
        { name: "steglatro", display: "Ertugliflozin (Steglatroâ„¢ï¼Œç©©é©å¦¥)", img: "https://imgur.com/YeTlrAL.png" },
        { name: "segluromet", display: "Ertugliflozin/Metformin (Seglurometâ„¢)", img: "https://imgur.com/s8mlurp.png" },
        { name: "steglujan", display: "Ertugliflozin/Sitagliptin (Steglujanâ„¢ï¼Œé‡‹ç³–å¥)", img: "https://imgur.com/PW07xqQ.png" }
    ],
    glp1: [
        { name: "dulaglutide", display: "Dulaglutideï¼ˆTrulicityÂ®ï¼Œæ˜“è£œç³–ï¼‰", img: "images/dulaglutide.png" },
        { name: "liraglutide", display: "Liraglutideï¼ˆSaxendaÂ®ï¼Œå–„çº–é” / VictozaÂ®ï¼Œç¶­å¤šèï¼‰", img: "images/liraglutide.png" },
        { name: "lixisenatide", display: "Lixisenatideï¼ˆLyxumiaÂ®ï¼Œåˆ©èˆ’å¬”ï¼‰", img: "images/lixisenatide.png" },
        { name: "semaglutide", display: "Semaglutideï¼ˆOzempicÂ®ï¼Œèƒ°å³¶èƒ½ / RybelsusÂ®ï¼Œç‘å€é©ï¼‰", img: "images/semaglutide.png" },
        { name: "tirzepatide", display: "Tirzepatideï¼ˆMounjaroÂ®ï¼ŒçŒ›å¥æ¨‚ï¼‰", img: "images/tirzepatide.png" }
    ]
};

// å…±é€šçš„ç”¢ç”Ÿ HTML å‡½å¼
function createDrugItem(drug, color) {
    return `
        <div class='drug-item'>
            <img src="${drug.img}" onclick="zoomImage('${drug.img}')" alt="${drug.display}">
            <button class='btn' style="background:${color}" onclick="showAdvice('${drug.display}', '${drug.img}')">
                ${drug.display}
            </button>
        </div>`;
}

function searchDrugs() {
    const keyword = document.getElementById('searchInput').value.trim().toLowerCase();
    const resultArea = document.getElementById('resultArea');
    
    if (keyword === "") {
        resultArea.innerHTML = ""; // æ¸…ç©ºæœå°‹
        return;
    }

    trackSearch(keyword);
    let found = false;
    let searchHTML = `<div class='msg bot' style='border-top: 1px dashed #ccc; padding-top: 10px;'>ğŸ” æœå°‹çµæœï¼š</div>`;

    Object.keys(drugs).forEach(group => {
        const color = group === 'sglt2' ? '#ff6fa5' : (group === 'glp1' ? '#ff9a6f' : '#007bff');
        drugs[group].forEach(drug => {
            // å³æ™‚éæ¿¾é‚è¼¯ï¼šåªè¦åŒ…å«é—œéµå­—å°±é¡¯ç¤º
            if (drug.display.toLowerCase().includes(keyword) || drug.name.toLowerCase().includes(keyword)) {
                found = true;
                searchHTML += createDrugItem(drug, color);
            }
        });
    });

    resultArea.innerHTML = found ? searchHTML : "<div class='msg bot'>âŒ æ²’æœ‰æ‰¾åˆ°ç›¸é—œè—¥å“ã€‚</div>";
}

function showGroup(group) {
    document.getElementById('searchInput').value = ''; // åˆ‡æ›åˆ†é¡æ™‚æ¸…ç©ºæœå°‹æ¡†
    const resultArea = document.getElementById('resultArea');
    resultArea.innerHTML = `<div class='msg bot'>æ­£åœ¨ç€è¦½ï¼š</div>`;
    
    const color = group === 'sglt2' ? '#ff6fa5' : (group === 'glp1' ? '#ff9a6f' : '#007bff');
    drugs[group].forEach(drug => {
        resultArea.innerHTML += createDrugItem(drug, color);
    });
}

function showAllDrugs() {
    document.getElementById('searchInput').value = '';
    const resultArea = document.getElementById('resultArea');
    resultArea.innerHTML = `<div class='msg bot'>æ­£åœ¨ç€è¦½ [å…¨éƒ¨è—¥å“]ï¼š</div>`;

    Object.keys(drugs).forEach(group => {
        const color = group === 'sglt2' ? '#ff6fa5' : (group === 'glp1' ? '#ff9a6f' : '#007bff');
        drugs[group].forEach(drug => {
            resultArea.innerHTML += createDrugItem(drug, color);
        });
    });
}

function showAdvice(drug, img) {
    trackDrugClick(drug);
    const box = document.getElementById('chatbox');
    let message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚è«‹å‹™å¿…èˆ‡æ‚¨çš„é†«å¸«ç¢ºèªã€‚`;

    // åˆ¤æ–·é‚è¼¯
    if (drug.includes("Dulaglutide") || drug.includes("Semaglutide") || drug.includes("Tirzepatide") || drug.includes("Trulicity") || drug.includes("Ozempic") || drug.includes("èƒ°å³¶èƒ½") || drug.includes("çŒ›å¥æ¨‚")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœç”¨ä¸€é€±ï¼ˆ7å¤©ï¼‰</span>ã€‚`;
    } 
    else if (drug.includes("Liraglutide") || drug.includes("Lixisenatide") || drug.includes("Saxenda") || drug.includes("Victoza") || drug.includes("å–„çº–é”")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">æ‰‹è¡“ç•¶å¤©åœè—¥</span>ã€‚`;
    } 
    else if (["Steglatro", "Forxiga", "Jardiance"].some(d => drug.includes(d))) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥è‡³å°‘ 4 å¤©</span>ã€‚`;
    } 
    else if (drug.includes("Invokana") || drug.includes("Synjardy") || drug.includes("Trijardy")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥è‡³å°‘ 3 å¤©</span>ã€‚`;
    } 
    else if (drug.includes("Plavix") || drug.includes("Efient") || drug.includes("Warfarin") || drug.includes("Aspirin") || drug.includes("Bokey")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 5ï½7 å¤©</span>ã€‚`;
    } 
    else if (drug.includes("Licodin") || drug.includes("Ticlopidine")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 10 å¤©</span>ã€‚`;
    } 
    else if (drug.includes("Clexane") || drug.includes("Enoxaparin")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 24 å°æ™‚</span>ã€‚`;
    }

    box.innerHTML = `
        <div class='msg user'>${drug}</div>
        <div class='msg bot'>
            ${message} <br><br>
            <img src="${img}" style="max-width: 200px; cursor:pointer;" onclick="zoomImage('${img}')">
        </div>
        <button class='btn' style="background:#28a745; width:100%;" onclick='location.reload()'>ğŸ” é‡æ–°æŸ¥è©¢</button>
    `;
}

function zoomImage(img) {
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("zoomed-image");
    modal.style.display = "flex"; 
    modalImg.src = img;
}
</script>
</body>
</html>
