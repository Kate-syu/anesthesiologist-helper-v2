<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-599PLQYSWE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-599PLQYSWE');

      function trackDrugClick(drugName) {
        gtag('event', 'view_drug_advice', { 'drug_name': drugName });
      }
      function trackSearch(keyword) {
        if (keyword.length >= 2) {
          gtag('event', 'search_drug', { 'search_term': keyword });
        }
      }
    </script>

    <meta charset="UTF-8">
    <title>è¡“å‰åœè—¥æé†’å°å¹«æ‰‹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: "Segoe UI", sans-serif; background: linear-gradient(to bottom right, #f0f4f8, #ffffff); padding: 15px; }
        #chatbox { background: #ffffff; padding: 20px; border-radius: 15px; max-width: 90%; margin: auto; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08); }
        .msg { margin: 10px 0; line-height: 1.6; }
        .bot { color: #34495e; }
        .user { text-align: right; color: #007bff; font-weight: 500; }
        .btn { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 30px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s; display: inline-block; }
        .btn:hover { background: #0056b3; transform: scale(1.05); }
        .footer { margin-top: 20px; font-size: 0.85em; color: #555; text-align: center; line-height: 1.6; }
        .drug-item { display: flex; flex-direction: column; align-items: center; margin: 10px 0; text-align: center; }
        .drug-item img { width: 150px; height: 150px; object-fit: contain; margin-bottom: 10px; border-radius: 8px; border: 1px solid #ccc; background: #f9f9f9; cursor: zoom-in; transition: transform 0.3s; }
        .drug-item img:hover { transform: scale(3); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.9); }
        .modal-content { margin: auto; display: block; width: 95%; max-width: 90%; max-height: 80%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        input[type="text"] { width: 95%; padding: 10px; margin: 10px 0; border-radius: 10px; border: 1px solid #ccc; font-size: 0.9rem; }
    </style>
</head>
<body>
    <h1 style="text-align:center;">è¡“å‰åœè—¥æé†’å°å¹«æ‰‹<br><span style="color:red; font-weight:bold; font-size: 0.5em;">æ­¤é¡è—¥ç‰©çš„åœç”¨ï¼Œè«‹å‹™å¿…èˆ‡æ‚¨çš„æ‰‹è¡“é†«å¸«è¨è«–å¾Œå†åŸ·è¡Œã€‚</span></h1>
    <div id="chatbox">
        <input type="text" id="searchInput" placeholder="ğŸ” æœå°‹è—¥å“åç¨±ï¼ˆå¦‚ï¼šçŒ›å¥æ¨‚ã€èƒ°å³¶èƒ½ï¼‰" oninput="searchDrugs()">
        <button class="btn" style="background:#888" onclick="showAllDrugs()">ğŸ—‚ï¸ ç€è¦½å…¨éƒ¨</button>
        <button class="btn" onclick="showGroup('anticoagulants')" style="background:#007bff">ğŸ’Š æŠ—å‡è¡€åŠ‘ç¾¤</button>
        <button class="btn" onclick="showGroup('sglt2')" style="background:#ff6fa5;">ğŸ’Š ç³–å°¿ç—…/å¿ƒè‡Ÿç”¨è—¥</button>
        <button class="btn" onclick="showGroup('glp1')" style="background:#ff9a6f;">ğŸ’Š æ¸›é‡ç”¨è—¥</button>
    </div>
    <div class="footer">æœ¬å·¥å…·ç”±è‡ºå¤§é†«é™¢æ–°ç«¹åˆ†é™¢éº»é†‰éƒ¨è£½ä½œï¼Œç”¨æ–¼ç—…æ‚£è¡›æ•™ç”¨é€”ã€‚</div>
    <div id="imageModal" class="modal" onclick="this.style.display='none'"><img class="modal-content" id="zoomed-image"></div>

<script>
const drugs = {
    anticoagulants: [
        { name: "licodin", display: "Licodinï¼ˆåˆ©è¡€é”ï¼‰", img: "https://imgur.com/NsEMXDR.png" },
        { name: "ticlopidine", display: "Ticlopidineï¼ˆåˆ©è¡€é”ï¼‰", img: "https://imgur.com/g6GJBS9.png" },
        { name: "efient", display: "Efientï¼ˆæŠ‘å‡å®‰ï¼‰", img: "https://imgur.com/WW1RKPq.png" },
        { name: "prasugrel", display: "Prasugrelï¼ˆæŠ‘å‡å®‰ï¼‰", img: "https://imgur.com/0BFFk1x.png" },
        { name: "plavix", display: "Plavixï¼ˆä¿æ “é€šï¼‰", img: "https://imgur.com/d6pVof3.png" },
        { name: "clopidogrel", display: "Clopidogrelï¼ˆä¿æ “é€šï¼‰", img: "https://imgur.com/OLM7PR7.png" },
        { name: "brilinta", display: "Brilintaï¼ˆå€æ—é”ï¼‰", img: "https://imgur.com/Stxt06t.png" },
        { name: "ticagrelor", display: "Ticagrelorï¼ˆæ³°å˜‰ï¼‰", img: "https://imgur.com/UxC5sLO.png" },
        { name: "cofrarin", display: "Cofrarinï¼ˆå¯åŒ–å‡ï¼‰", img: "https://imgur.com/i8lY1Eh.png" },
        { name: "warfarin", display: "Warfarinï¼ˆæ­æœå¯§ï¼‰", img: "https://imgur.com/WakHRoW.png" },
        { name: "aspirin", display: "Aspirinï¼ˆé˜¿æ–¯åŒ¹éˆï¼‰", img: "https://imgur.com/ZjzTIWF.png" },
        { name: "bokey", display: "Bokeyï¼ˆä¼¯åŸºï¼‰", img: "https://imgur.com/slkEisb.png" },
        { name: "pletaal", display: "Pletaalï¼ˆæ™®é”ï¼‰", img: "https://imgur.com/OPvZKNW.png" },
        { name: "cilostazol", display: "Cilostazolï¼ˆå–œä¾†å¦¥ï¼‰", img: "https://imgur.com/OPvZKNW.png" },
        { name: "sandel", display: "Sandelï¼ˆå¿ƒæ»´èˆ’ï¼‰", img: "https://imgur.com/CZondqv.png" },
        { name: "dipyridamole", display: "Dipyridamoleï¼ˆæ‰€é›·å¸ï¼‰", img: "https://imgur.com/PKMbp8F.png" },
        { name: "eliquis", display: "Eliquisï¼ˆè‰¾å¿…å…‹å‡ï¼‰", img: "https://imgur.com/5ZN6msk.png" },
        { name: "apixaban", display: "Apixabanï¼ˆè‰¾å¿…å…‹å‡ï¼‰", img: "https://imgur.com/5ZN6msk.png" },
        { name: "lixiana", display: "Lixianaï¼ˆé‡Œå…ˆå®‰ï¼‰", img: "https://imgur.com/GhW0XSG.png" },
        { name: "endoxaban", display: "Endoxabanï¼ˆæ©å¤šæ²™ç­ï¼‰", img: "https://imgur.com/GhW0XSG.png" },
        { name: "xarelto", display: "Xareltoï¼ˆæ‹œç‘å¦¥ï¼‰", img: "https://imgur.com/s54F6i9.png" },
        { name: "rivaroxaban", display: "Rivaroxabanï¼ˆåˆ©ä¼æ²™ç­ï¼‰", img: "https://imgur.com/s54F6i9.png" },
        { name: "clexane", display: "Clexaneï¼ˆå¯ç«‹å–„ï¼‰", img: "https://imgur.com/qZGoe5E.png" },
        { name: "enoxaparin", display: "Enoxaparinï¼ˆä¾è«¾è‚ç´ ï¼‰", img: "https://imgur.com/qZGoe5E.png" },
        { name: "gincare", display: "Gincareï¼ˆéŠ€æå¯§ï¼‰", img: "https://imgur.com/nLSYFme.png" },
    ],
    sglt2: [
        { name: "invokana", display: "Canagliflozinï¼ˆInvokanaÂ®ï¼Œå¯æ‹¿ç³–ï¼‰", img: "https://imgur.com/rnyqtHh.png" },
        { name: "farxiga", display: "Dapagliflozinï¼ˆForxigaÂ®ï¼Œç¦é©ä½³ï¼‰", img: "https://imgur.com/cfdwxTi.png" },
        { name: "jardiance", display: "Empagliflozinï¼ˆJardianceÂ®ï¼Œæ©æ’ç³–ï¼‰", img: "https://imgur.com/8x87vYV.png" },
        { name: "steglatro", display: "Ertugliflozinï¼ˆSteglatroâ„¢ï¼Œé‡‹ç³–å¥ï¼‰", img: "https://imgur.com/YeTlrAL.png" },
        { name: "xigduo", display: "Dapagliflozin/Metformin XRï¼ˆXigduoÂ®ï¼Œå–œå¦¥ç³–ï¼‰", img: "https://imgur.com/NJ6zMSD.png" },
        { name: "synjardy", display: "Empagliflozin/Metforminï¼ˆSynjardyÂ®ï¼Œæ²›å¦¥ç³–è¤‡æ–¹ï¼‰", img: "https://imgur.com/RHvBTgK.png" },
        { name: "steglujan", display: "Ertugliflozin/Sitagliptinï¼ˆSteglujanâ„¢ï¼Œæ†å¦¥ç³–ä½³ï¼‰", img: "https://imgur.com/PW07xqQ.png" }
    ],
    glp1: [
        { name: "dulaglutide", display: "Dulaglutideï¼ˆTrulicityÂ®ï¼Œæ˜“è£œç³–ï¼‰", img: "images/dulaglutide.png" },
        { name: "liraglutide", display: "Liraglutideï¼ˆSaxendaÂ®ï¼Œå–„çº–é” / VictozaÂ®ï¼Œç¶­å¤šèï¼‰", img: "images/liraglutide.png" },
        { name: "lixisenatide", display: "Lixisenatideï¼ˆLyxumiaÂ®ï¼Œåˆ©èˆ’å¬”ï¼‰", img: "images/lixisenatide.png" },
        { name: "semaglutide", display: "Semaglutideï¼ˆOzempicÂ®ï¼Œèƒ°å³¶èƒ½ / RybelsusÂ®ï¼Œç‘å€é©ï¼‰", img: "images/semaglutide.png" },
        { name: "tirzepatide", display: "Tirzepatideï¼ˆMounjaroÂ®ï¼ŒçŒ›å¥æ¨‚ï¼‰", img: "images/tirzepatide.png" }
    ]
};

function showGroup(group) {
    const box = document.getElementById('chatbox');
    const groupNames = { anticoagulants: 'æŠ—å‡è¡€åŠ‘', sglt2: 'ç³–å°¿ç—…/å¿ƒè‡Ÿç”¨è—¥', glp1: 'GLP-1 é¡ç”¨è—¥' };
    box.innerHTML = `
        <input type="text" id="searchInput" placeholder="ğŸ” æœå°‹è—¥å“åç¨±" oninput="searchDrugs()">
        <button class="btn" style="background:#888" onclick="showAllDrugs()">ğŸ—‚ï¸ ç€è¦½å…¨éƒ¨</button>
        <button class="btn" onclick="showGroup('anticoagulants')" style="background:#007bff">ğŸ’Š æŠ—å‡è¡€åŠ‘ç¾¤</button>
        <button class="btn" onclick="showGroup('sglt2')" style="background:#ff6fa5;">ğŸ’Š ç³–å°¿ç—…/å¿ƒè‡Ÿç”¨è—¥</button>
        <button class="btn" onclick="showGroup('glp1')" style="background:#ff9a6f;">ğŸ’Š GLP-1 é¡ç”¨è—¥</button>
        <div class='msg bot'>æ‚¨æ­£åœ¨ç€è¦½ [${groupNames[group]}]ï¼Œè«‹é¸æ“‡è—¥å“ï¼š</div>
    `;
    drugs[group].forEach(drug => {
        const color = group==='sglt2'?'#ff6fa5':(group==='glp1'?'#ff9a6f':'#007bff');
        box.innerHTML += `<div class='drug-item'><img src="${drug.img}" onclick="showAdvice('${drug.display}', '${drug.img}')"><button class='btn' style="background:${color}" onclick="showAdvice('${drug.display}', '${drug.img}')">${drug.display}</button></div>`;
    });
}

function searchDrugs() {
    const keyword = document.getElementById('searchInput').value.toLowerCase();
    trackSearch(keyword);
    let resultBox = document.getElementById('searchResults') || document.createElement('div');
    resultBox.id = 'searchResults'; document.getElementById('chatbox').appendChild(resultBox);
    resultBox.innerHTML = ''; if (!keyword) return;
    let found = false;
    Object.keys(drugs).forEach(group => {
        drugs[group].filter(d => d.display.toLowerCase().includes(keyword) || d.name.toLowerCase().includes(keyword)).forEach(drug => {
            found = true; const color = group==='sglt2'?'#ff6fa5':(group==='glp1'?'#ff9a6f':'#007bff');
            resultBox.innerHTML += `<div class='drug-item'><img src="${drug.img}" onclick="showAdvice('${drug.display}', '${drug.img}')"><button class='btn' style="background:${color}" onclick="showAdvice('${drug.display}', '${drug.img}')">${drug.display}</button></div>`;
        });
    });
    if (!found) resultBox.innerHTML = "<div class='msg bot'>æ²’æœ‰æ‰¾åˆ°ç›¸é—œè—¥å“ã€‚</div>";
}

function showAdvice(drug, img) {
    trackDrugClick(drug);
    const box = document.getElementById('chatbox');
    box.innerHTML = `<div class='msg user'>${drug}</div>`;
    let message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚è«‹å‹™å¿…èˆ‡æ‚¨çš„é†«å¸«ç¢ºèªã€‚`;

    // é‚è¼¯åˆ¤å®š
    if (drug.includes("Dulaglutide") || drug.includes("Semaglutide") || drug.includes("Tirzepatide") || drug.includes("Trulicity") || drug.includes("Ozempic") || drug.includes("èƒ°å³¶èƒ½") || drug.includes("çŒ›å¥æ¨‚")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœç”¨ä¸€é€±ï¼ˆ7å¤©ï¼‰</span>ã€‚`;
    } else if (drug.includes("Liraglutide") || drug.includes("Lixisenatide") || drug.includes("Saxenda") || drug.includes("Victoza") || drug.includes("å–„çº–é”")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">æ‰‹è¡“ç•¶å¤©åœè—¥</span>ã€‚`;
    } else if (["Steglatro", "Forxiga", "Jardiance", "Invokana"].some(d => drug.includes(d))) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥è‡³å°‘ 3ï½4 å¤©</span>ã€‚`;
    } else if (drug.includes("Plavix") || drug.includes("Efient") || drug.includes("Warfarin") || drug.includes("Aspirin") || drug.includes("Bokey")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 5ï½7 å¤©</span>ã€‚`;
    } else if (drug.includes("Licodin") || drug.includes("Ticlopidine")) {
        message = `æ‚¨æŸ¥è©¢çš„æ˜¯ <b>${drug}</b>ã€‚ğŸ”” å»ºè­°<span style="color:red; font-weight:bold;">è¡“å‰åœè—¥ 10 å¤©</span>ã€‚`;
    }

    box.innerHTML += `<div class='msg bot'>${message} <br> <img src="${img}" style="max-width: 200px;" onclick="zoomImage('${img}')"></div>`;
    box.innerHTML += `<button class='btn' style="background:#28a745" onclick='location.reload()'>ğŸ” é‡æ–°æŸ¥è©¢</button>`;
}

function zoomImage(img) {
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("zoomed-image");
    modal.style.display = "block"; modalImg.src = img;
}

function showAllDrugs() {
    Object.keys(drugs).forEach(g => showGroup(g));
}
</script>
</body>
</html>
